{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\slimm\\\\Desktop\\\\Coding\\\\Projects\\\\Node_Nimita_Classes\\\\TSReactBlogV2.0\\\\tsblog_client\\\\src\\\\context\\\\AuthContext.tsx\",\n  _s = $RefreshSig$();\nimport { createContext, useCallback, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext(undefined);\nexport const AuthContextProvider = ({\n  children\n}) => {\n  _s();\n  const [subscriber, setSubscriber] = useState(null);\n  const [registerError, setRegisterError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [loginError, setLoginError] = useState(null);\n  const [isLoginLoading, setIsLoginLoading] = useState(false);\n  const [registerInfo, setRegisterInfo] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\"\n  });\n  const [loginInfo, setLoginInfo] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  useEffect(() => {\n    const subscriber = localStorage.getItem(\"Subscriber\");\n    setSubscriber(JSON.parse(subscriber));\n  }, []);\n  const updateRegisterInfo = useCallback(info => {\n    setRegisterInfo(info);\n  }, []);\n  const updateLoginInfo = useCallback(info => {\n    setLoginInfo(info);\n  }, []);\n  const registerSubscriber = useCallback(async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    setRegisterError(null);\n    try {\n      const response = await axios.post(`/subscribers/register`, registerInfo);\n      localStorage.setItem(\"Subscriber\", JSON.stringify(response.data));\n      setSubscriber(response.data);\n    } catch (error) {\n      setRegisterError(error.message);\n    }\n    setIsLoading(false);\n  }, [registerInfo]);\n  const loginSubscriber = useCallback(async e => {\n    e.preventDefault();\n    setIsLoginLoading(true);\n    setLoginError(null);\n    try {\n      const response = await axios.post(`/subscribers/login`, loginInfo);\n      localStorage.setItem(\"Subscriber\", JSON.stringify(response.data));\n      setSubscriber(response.data);\n    } catch (error) {\n      setLoginError(error);\n    }\n    setIsLoginLoading(false);\n  }, [loginInfo]);\n  const logoutSubscriber = useCallback(() => {\n    localStorage.removeItem(\"Subscriber\");\n    setSubscriber(null);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      subscriber,\n      registerInfo,\n      updateRegisterInfo,\n      registerSubscriber,\n      registerError,\n      isLoading,\n      logoutSubscriber,\n      loginSubscriber,\n      updateLoginInfo,\n      loginInfo,\n      loginError,\n      isLoginLoading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 12\n  }, this);\n};\n_s(AuthContextProvider, \"JFXz0r1OfJ/FUSp8+Y84eg/05bE=\");\n_c = AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["createContext","useCallback","useEffect","useState","axios","jsxDEV","_jsxDEV","AuthContext","undefined","AuthContextProvider","children","_s","subscriber","setSubscriber","registerError","setRegisterError","isLoading","setIsLoading","loginError","setLoginError","isLoginLoading","setIsLoginLoading","registerInfo","setRegisterInfo","name","email","password","loginInfo","setLoginInfo","localStorage","getItem","JSON","parse","updateRegisterInfo","info","updateLoginInfo","registerSubscriber","e","preventDefault","response","post","setItem","stringify","data","error","message","loginSubscriber","logoutSubscriber","removeItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/slimm/Desktop/Coding/Projects/Node_Nimita_Classes/TSReactBlogV2.0/tsblog_client/src/context/AuthContext.tsx"],"sourcesContent":["import { createContext, useCallback, useEffect, useState } from \"react\";\r\nimport { baseUrl, postRequest } from \"../utils/services\";\r\nimport axios from \"axios\";\r\n\r\nexport const AuthContext = createContext(undefined);\r\n\r\ninterface Props {\r\n    children: React.ReactNode\r\n}\r\n\r\nexport const AuthContextProvider = ({ children }: Props) => {\r\n\r\n    const [subscriber, setSubscriber] = useState<null|'string'>(null);\r\n    const [registerError, setRegisterError] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    const [loginError, setLoginError] = useState(null);\r\n    const [isLoginLoading, setIsLoginLoading] = useState(false);\r\n    const [registerInfo, setRegisterInfo] = useState({\r\n        name: \"\",\r\n        email: \"\",  \r\n        password: \"\",\r\n    });\r\n    const [loginInfo, setLoginInfo] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n    })\r\n\r\n    useEffect(() => {\r\n        const subscriber = localStorage.getItem(\"Subscriber\");\r\n        setSubscriber(JSON.parse(subscriber))\r\n    }, [])\r\n\r\n    const updateRegisterInfo = useCallback((info: any) => {\r\n        setRegisterInfo(info);\r\n    }, []);\r\n\r\n    const updateLoginInfo = useCallback((info: any) => {\r\n        setLoginInfo(info);\r\n    }, []);\r\n\r\n    const registerSubscriber = useCallback(async (e: any) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        setRegisterError(null);\r\n        try {\r\n        const response = await axios.post(`/subscribers/register`, registerInfo);\r\n        localStorage.setItem(\"Subscriber\", JSON.stringify(response.data));\r\n        setSubscriber(response.data);\r\n        }catch(error) {\r\n            setRegisterError((error as any).message)\r\n        }\r\n        setIsLoading(false);\r\n    }, [registerInfo]);\r\n\r\n    const loginSubscriber = useCallback(async (e: any) => {\r\n        e.preventDefault();\r\n        setIsLoginLoading(true);\r\n        setLoginError(null);\r\ntry {\r\n     const response = await axios.post(`/subscribers/login`, loginInfo);\r\n        \r\n       \r\n\r\n        localStorage.setItem(\"Subscriber\", JSON.stringify(response.data));\r\n        setSubscriber(response.data);\r\n} catch (error) {\r\n    setLoginError((error as any))\r\n}\r\n       setIsLoginLoading(false);\r\n    }, [loginInfo])\r\n\r\n    const logoutSubscriber = useCallback(() => {\r\n        localStorage.removeItem(\"Subscriber\");\r\n        setSubscriber(null);\r\n    }, [])\r\n\r\n    return <AuthContext.Provider\r\n        value={{\r\n            subscriber,\r\n            registerInfo,\r\n            updateRegisterInfo,\r\n            registerSubscriber,\r\n            registerError,\r\n            isLoading,\r\n            \r\n            logoutSubscriber,\r\n\r\n            loginSubscriber,\r\n            updateLoginInfo,\r\n            loginInfo,\r\n            loginError,\r\n            isLoginLoading,\r\n        }}>\r\n        {children}\r\n    </AuthContext.Provider>\r\n\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}